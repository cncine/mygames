functions_d6ad677b_427a_4623_b50f_a445a3b0ef8a={events:{initGame:function(){if(core.flags.bigKeyIsBox){core.material.items.bigKey={cls:"items",name:"钥匙盒"}}if(core.flags.pickaxeFourDirections){core.material.items.pickaxe.text="可以破坏勇士四周的墙"}if(core.flags.bombFourDirections){core.material.items.bomb.text="可以炸掉勇士四周的怪物"}if(core.flags.equipment){core.material.items.sword1={cls:"constants",name:"铁剑",text:"一把很普通的铁剑"};core.material.items.sword2={cls:"constants",name:"银剑",text:"一把很普通的银剑"};core.material.items.sword3={cls:"constants",name:"骑士剑",text:"一把很普通的骑士剑"};core.material.items.sword4={cls:"constants",name:"圣剑",text:"一把很普通的圣剑"};core.material.items.sword5={cls:"constants",name:"神圣剑",text:"一把很普通的神圣剑"};core.material.items.shield1={cls:"constants",name:"铁盾",text:"一个很普通的铁盾"};core.material.items.shield2={cls:"constants",name:"银盾",text:"一个很普通的银盾"};core.material.items.shield3={cls:"constants",name:"骑士盾",text:"一个很普通的骑士盾"};core.material.items.shield4={cls:"constants",name:"圣盾",text:"一个很普通的圣盾"};core.material.items.shield5={cls:"constants",name:"神圣盾",text:"一个很普通的神圣盾"}}},setInitData:function(a){if(a=="Easy"){core.setFlag("hard",1)}if(a=="Normal"){core.setFlag("hard",2)}if(a=="Hard"){core.setFlag("hard",3)}if(a=="Hell"){core.setFlag("hard",4)}core.events.afterLoadData()},win:function(a){core.ui.closePanel();var b=core.status.replay.replaying;core.stopReplay();core.waitHeroToStop(function(){core.removeGlobalAnimate(0,0,true);core.clearMap("all");core.drawText(["\t["+(a||"恭喜通关")+"]你的分数是${status:hp}。"],function(){core.events.gameOver(a||"",b)})})},lose:function(a){core.ui.closePanel();var b=core.status.replay.replaying;core.stopReplay();core.waitHeroToStop(function(){core.drawText(["\t["+(a||"结局1")+"]你死了。\n如题。"],function(){core.events.gameOver(null,b)})})},afterChangeFloor:function(a){if(!core.hasFlag("visited_"+a)){core.insertAction(core.floors[a].firstArrive);core.setFlag("visited_"+a,true)}core.autosave(true);if(Math.random()*4>>0==2){core.status.eventSteps=1+(Math.random()*23>>0)}if(core.getFlag("stairNum","0")<=-51&&(Math.random()*13>>0)==7){core.status.waitInput=true}},addPoint:function(a){var b=a.point;if(!core.flags.enableAddPoint||!core.isset(b)||b<=0){return[]}return[{type:"choices",choices:[{text:"攻击+"+(1*b),action:[{type:"setValue",name:"status:atk",value:"status:atk+"+(1*b)}]},{text:"防御+"+(2*b),action:[{type:"setValue",name:"status:def",value:"status:def+"+(2*b)}]},{text:"生命+"+(200*b),action:[{type:"setValue",name:"status:hp",value:"status:hp+"+(200*b)}]},]}]},afterBattle:function(d,l,m,a){var c=core.material.enemys[d];var b=core.enemys.getDamage(d);if(b==null){b=core.status.hero.hp+1}core.status.hero.hp-=b;if(core.status.hero.hp<=0){core.status.hero.hp=0;core.updateStatusBar();core.events.lose("战斗失败");return}var h=c.money;if(core.hasItem("coin")){h*=2}if(core.hasFlag("curse")){h=0}core.status.hero.money+=h;var f=c.experience;if(core.hasFlag("curse")){f=0}core.status.hero.experience+=f;var g="打败 "+c.name;if(core.flags.enableMoney){g+="，金币+"+h}if(core.flags.enableExperience){g+="，经验+"+f}core.drawTip(g);if(core.isset(l)&&core.isset(m)){core.removeBlock(l,m);core.canvas.event.clearRect(32*l,32*m,32,32)}var j=c.special;if(core.enemys.hasSpecial(j,12)&&!core.hasFlag("poison")){core.setFlag("poison",true)}if(core.enemys.hasSpecial(j,13)&&!core.hasFlag("weak")){core.setFlag("weak",true);core.status.hero.atk-=core.values.weakValue;core.status.hero.def-=core.values.weakValue}if(core.enemys.hasSpecial(j,14)&&!core.hasFlag("curse")){core.setFlag("curse",true)}if(core.flags.hatredDecrease&&core.enemys.hasSpecial(j,17)){core.setFlag("hatred",parseInt(core.getFlag("hatred",0)/2))}if(core.enemys.hasSpecial(j,19)){core.status.hero.hp=1}if(core.enemys.hasSpecial(j,21)){core.status.hero.atk-=(c.atkValue||0);core.status.hero.def-=(c.defValue||0);if(core.status.hero.atk<0){core.status.hero.atk=0}if(core.status.hero.def<0){core.status.hero.def=0}}core.setFlag("hatred",core.getFlag("hatred",0)+core.values.hatred);core.updateStatusBar();var k=[];if(!core.enemys.hasSpecial(j,18)&&core.isset(l)&&core.isset(m)){var e=core.floors[core.status.floorId].afterBattle[l+","+m];if(core.isset(e)){core.unshift(k,e)}}var i=core.material.enemys[d].point;if(core.isset(i)&&i>0){core.unshift(k,core.events.addPoint(core.material.enemys[d]))}if(k.length>0){core.events.insertAction(k,l,m)}if(core.status.event.id==null){core.continueAutomaticRoute()}else{core.clearContinueAutomaticRoute()}if(core.isset(a)){a()}},afterOpenDoor:function(b,e,f,a){var d=[];if(core.isset(e)&&core.isset(f)){var c=core.floors[core.status.floorId].afterOpenDoor[e+","+f];if(core.isset(c)){core.unshift(d,c)}}if(d.length>0){core.events.insertAction(d,e,f)}if(core.status.event.id==null){core.continueAutomaticRoute()}else{core.clearContinueAutomaticRoute()}if(core.isset(a)){a()}},afterChangeLight:function(a,b){},afterPushBox:function(){var a=function(){for(var c=0;c<core.status.thisMap.blocks.length;c++){var b=core.status.thisMap.blocks[c];if(core.isset(b.event)&&b.event.id=="box"){return false}}return true};if(a()){}},afterUseBomb:function(){},beforeSaveData:function(a){},afterLoadData:function(a){}},ui:{drawAbout:function(){if(!core.isPlaying()){core.status.event={id:null,data:null};core.dom.startPanel.style.display="none"}core.lockControl();core.status.event.id="about";core.clearMap("ui",0,0,416,416);var b=48,e=36,c=416-2*b,a=416-2*e;core.setAlpha("ui",0.85);core.fillRect("ui",b,e,c,a,"#000000");core.setAlpha("ui",1);core.strokeRect("ui",b-1,e-1,c+1,a+1,"#FFFFFF",2);var d=b+24;core.canvas.ui.textAlign="left";core.fillText("ui","HTML5 魔塔样板",d,e+35,"#FFD700","bold 22px Verdana");core.fillText("ui","版本： "+core.firstData.version,d,e+80,"#FFFFFF","bold 17px Verdana");core.fillText("ui","作者： 艾之葵",d,e+112);core.fillText("ui","HTML5魔塔交流群：539113091",d,e+112+32)}},plugins:{plugin:function(){console.log("插件编写测试");this.test=function(){console.log("插件函数执行测试")};this.useEquipment=function(a){if(a.indexOf("sword")==0){var b=core.getFlag("sword","sword0");if(typeof core.values[b]=="number"){core.status.hero.atk-=core.values[b]}else{core.status.hero.atk-=core.values[b].atk||0;core.status.hero.def-=core.values[b].def||0;core.status.hero.mdef-=core.values[b].mdef||0}if(typeof core.values[a]=="number"){core.status.hero.atk+=core.values[a]}else{core.status.hero.atk+=core.values[a].atk||0;core.status.hero.def+=core.values[a].def||0;core.status.hero.mdef+=core.values[a].mdef||0}core.setItem(b,1);core.setItem(a,0);core.setFlag("sword",a);core.drawTip("已装备"+core.material.items[a].name)}if(a.indexOf("shield")==0){var b=core.getFlag("shield","shield0");if(typeof core.values[b]=="number"){core.status.hero.def-=core.values[b]}else{core.status.hero.atk-=core.values[b].atk||0;core.status.hero.def-=core.values[b].def||0;core.status.hero.mdef-=core.values[b].mdef||0}if(typeof core.values[a]=="number"){core.status.hero.def+=core.values[a]}else{core.status.hero.atk+=core.values[a].atk||0;core.status.hero.def+=core.values[a].def||0;core.status.hero.mdef+=core.values[a].mdef||0}core.setItem(b,1);core.setItem(a,0);core.setFlag("shield",a);core.drawTip("已装备"+core.material.items[a].name)}};Array.prototype.shuffle=function(){var a=this;var c=a.length,d,b;while(c){b=Math.floor(Math.random()*c--);d=a[c];a[c]=a[b];a[b]=d}return a};core.isayArray=["黄之华，你个村支书，你以为我怕你啊，你官大挺得瑟的啊？你要是再不识抬举，三天之内我就揍你！操你妈的！你给我记住了，如果你再装逼，当场给你撕碎，就像手撕鬼子一样，然后给你扔粪坑里！","李昱梅你个臭婊子，臭母狗！你个臭骚逼，你看你那个吃屎的逼样，你配当什么老师？赶紧给我滚去掏粪去！别让我看见你，不然我一脚给你踢狗逼里去！真想活剐了你！","这个破村子，住的都是些刁民！都是些渣渣，窝囊废！拿个刀怎么了，还你妈派这些臭城管给你们大爷关精神病院去！要有机会，统统的给你们砍死！一个个都傻逼一样的。","李桂英，你以为给点破钱就了不起啊？不是你把我带到汉中，我能受这么多苦？我说什么你都不听，你最好别再来找我麻烦，不然一棒子削死你，我日你死死妈的！","人生就像走楼梯，不断地往前走，没等你走到尽头，你就老死了。有很多时候我在想，往前走的目的是什么，为什么要走？就像我现在这样。难道仅仅是为了抓一个犯人吗？也许这就是无解的人生。","你看着血红的场景，似梦非梦，仿佛永远也走不到尽头一样。可我已经没有退路了，我必须不回头的走下去，直到海枯石烂，直到天荒地老，只要走不死，就往死里走！就算走到地狱，我心中的信念也不会磨灭。","你说人死后会怎样？转世？去到另一个地方？还是化为灰烬？无论如何，我还是认为会像光碟反复播放一样，无限的循环着，就像我现在，经历着重复的动作，走着重复的楼梯。就这样无尽的循环着。或许，只是为了拯救虚无，虚无和轮回，要是你，你会选择哪一个呢？","论姓氏，我也是有着偏见的，我讨厌姓张的男人，也讨厌姓李的女人，虽然这不是绝对的。对于姓杨的、姓黄的、姓何的、姓冯的我也不同程度的讨厌着。因为，他们的的确确的对我造成了无法忘却的伤害，我知道这样不对，但我没有办法。","四大魔鬼是谁？臭气缝：一个永远不懂事的破娃，就知道和我对着干，他取代了我的地位。张镶天：臭气缝的哥哥，卷走过我二十块钱。经常给我造谣生事、侮辱我，十分该死。李昱梅：一个教日语的慰安妇，张镶天的母亲，歧视我，让我父亲打我，见到她非得整死她。还有一个是罪该万死的日式恐怖游戏作者，李昱梅的丈夫，他的作品让我有了严重的心理阴影，至今天天能想起。"];core.isayArrayAlready=[];this.dialogue=function(){if(core.isayArray.length<=0){core.insertAction("没有文本");return}if(core.isayArrayAlready.length<=0){for(var a=0;a<core.isayArray.length;a++){core.isayArrayAlready.push(a)}core.isayArrayAlready=core.isayArrayAlready.shuffle()}core.insertAction(core.isayArray[core.isayArrayAlready.pop()])}}}};